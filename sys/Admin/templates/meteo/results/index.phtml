<?php include __DIR__ . '../../../layouts/before_app.phtml'; ?>
<div class="card">
	<h1>Meteo time series results</h1>
	<div class="d-flex w-100">
		<div class="mr-auto form-group"></div>
		<div class="form-group">
			<form method="get">
				<input type="search" name="search" class="form-control" placeholder="<?=__('Search')?>" value="<?=htmlspecialchars(urldecode($searchString))?>">
			</form>
		</div>
	</div>
	<table class="table table-striped table-bordered">
		<thead>
		<tr>
			<th><?=sortableColumn('Meteopoint name', 'mp.name');?></th>
			<th><?=sortableColumn('Property', 'mop.symbol');?></th>
			<th><?=sortableColumn('Phenomenon time begin', 'mts.phenomenon_time_begin');?></th>
			<th><?=sortableColumn('Phenomenon time end', 'mts.phenomenon_time_end');?></th>
			<th><?=sortableColumn('Result time', 'mts.result_time');?></th>
			<th><?=sortableColumn('Time', 'mr.time');?></th>
			<th><?=sortableColumn('Value', 'mr.value');?></th>
		</tr>
		</thead>
		<tbody>
            <?php
				if (count($results) > 0):
					foreach ($results as $result):
			?>
			<tr>
				<td><?=$result['name'] ?? null;?></td>
				<td><?=$result['symbol'] ?? null;?></td>
				<td><?=$result['phenomenon_time_begin'] ?? null;?></td>
				<td><?=$result['phenomenon_time_end'] ?? null;?></td>
				<td><?=$result['result_time'] ?? null;?></td>
				<td><?=$result['time'] ?? null;?></td>
				<td><?=$result['value'] ?? null;?></td>
			</tr>
			<?php
					endforeach;
				else:
			?>
					<tr>
						<td colspan="7">
							There is no record to show.
						</td>
					</tr>
			<?
				endif;
            ?>
		</tbody>
		<tfoot>
		<tr>
			<td colspan="7">
				<div class="paginator">
					<?php include __DIR__.'/../../parts/paginator.phtml';?>
				</div>
			</td>
		</tr>
		</tfoot>
	</table>
</div>
<?php include __DIR__ . '../../../layouts/after_app.phtml'; ?>
